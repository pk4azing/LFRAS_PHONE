{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Reset Password | LFRAS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Mofi CSS -->
  <link rel="stylesheet" href="{% static 'mofi/css/vendors/bootstrap.css' %}">
  <link rel="stylesheet" href="{% static 'mofi/css/style.css' %}">
  <link id="color" rel="stylesheet" href="{% static 'mofi/css/color-1.css' %}">
  <link rel="stylesheet" href="{% static 'mofi/css/responsive.css' %}">
  <style>
    /* Keep this page standalone (no app sidebar/header) */
    html, body { height: 100%; }
    body { background: var(--light-background); }
    .auth-wrap {
      min-height: 100vh;
      display: flex; align-items: center; justify-content: center;
      padding: 24px;
    }
    .login-card.login-dark { max-width: 480px; width: 100%; }
    .invalid-feedback { display: block; }
  </style>
</head>
<body>
  <div class="auth-wrap">
    <div class="login-card login-dark">
      <div class="text-center mb-4">
{#        <a class="logo d-inline-flex align-items-center gap-2" href="{% url 'accounts:login' %}">#}
{#          <img class="img-fluid for-light" src="{% static 'mofi/images/logo/logo.png' %}" alt="Lucid Compliances" style="height:36px">#}
{#        </a>#}
      </div>

      <div class="login-main">
        <form method="post" class="theme-form">
          {% csrf_token %}

          <h4 class="mb-2">Forgot your password?</h4>
          <p class="f-light mb-4">Enter the email you use for LFRAS and we’ll send you a reset link.</p>

          {% if form.non_field_errors %}
            <div class="alert alert-danger" role="alert">
              {% for e in form.non_field_errors %}{{ e }}{% if not forloop.last %}<br>{% endif %}{% endfor %}
            </div>
          {% endif %}

          <div class="form-group mb-3">
            <label class="col-form-label" for="{{ form.email.id_for_label }}">Email address</label>
            <!-- Render field directly to avoid custom filters like add_class -->
            <div class="input-group">
              {{ form.email }}
            </div>
            {% if form.email.errors %}
              <div class="invalid-feedback">
                {% for e in form.email.errors %}{{ e }}{% if not forloop.last %}<br>{% endif %}{% endfor %}
              </div>
            {% endif %}
          </div>

          <button class="btn btn-primary w-100 btn-hover-effect" type="submit">Send reset link</button>

          <p class="mt-4 mb-0 text-center">
            Remember it again?
            <a class="ms-2" href="{% url 'accounts:login' %}">Back to sign in</a>
          </p>
        </form>
      </div>
    </div>
  </div>

  <!-- Mofi JS -->
  <script src="{% static 'mofi/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'mofi/js/icons/feather-icon/feather.min.js' %}"></script>
  <script src="{% static 'mofi/js/script.js' %}"></script>

  <script>
    // If the widget didn’t include Bootstrap class, add it safely.
    (function () {
      var el = document.getElementById("{{ form.email.id_for_label }}");
      if (el && !el.classList.contains('form-control')) {
        el.classList.add('form-control');
      }
      el?.setAttribute('placeholder', 'name@example.com');
      el?.setAttribute('autocomplete', 'email');
      el?.setAttribute('required', 'required');
      el?.setAttribute('inputmode', 'email');
    })();
  </script>
</body>
</html>